Потоковая обработка - события обрабатываются по мере их возникновения

Общий принцип - уведомление потребителей о новых сообщениях через систему обмена сообщениями с моделью публикация/подписка

Две проблемы:
- что если инициаторы будут отправлять сообщения быстрее, чем получатели будут из обрабатывать? Есть три варианта - отбрасывать сообщения,
	буферизовать в виде очереди и использовать контроль обратного потока, запрещая инициатору отправлять новые сообщения. 
- если узел сети даст сбой или будет временно недоступен? Будут ли потеряны сообщения? 
	В этом случае можно реализовать некую запись на диск или репликации, и затем дослать пропущенные сообщения. 

Можно реализовать обмен сообщениями напрямую между инициаторами и потребителями:
- по udp
- по tcp или ip multicast, напр, в библиотеках zeromq или nanomsg
- веб хуки. 

Вместо прямого обмена часто ирс брокеры сообщений (очереди сообщений). В этом случае потребители обычно асинхронны, 
	а инициатор ждёт только подтверждения от брокера о буферизации сообщения. 

- брокеры обычно не хранят сообщения после отправки
- в основном рассчитаны на небольшой набор данных 

Когда потребителей несколько ипюса два основных паттерна обмена сообщениями:
- распределение нагрузки - каждое сообщение доставляется одному потребителю. 
- разветвление - каждое сообщение доставляется всем потребителям. 

Брокеры исп подтверждения - клиент должен явно сообщить брокеру об обработке сообщения, и тогда брокер удаляет его из очереди. 

При последовательной обработке сообщений можно не ждать ответов от клиентов, а определять, какие сообщения были обработаны, 
	по смещению потребителя, это похоже на номер транзакции в журнале. 

Если сообщения хранятся в журнале и потребителей отстаёт от инициаторов настолько далеко, что требуемые ему сообщения уже были 
	удалены из журнала, брокер может отбросить эти сообщения, но это случается достаточно редко и не затрагивает других клиентов.

Обработка потоков:
- извлекать данные из событий и писать в бд или иную систему хранения
- передавать события юзерам
- обрабатывать один или несколько входных потоков и создавать один или несколько выходных, как в конвейере.

Обработка сложных событий (complex event processing, cep) - технология для анализа потоков событий по определённым правилам и 
	заданным шаблонам, навроде регулярок, но для событий.

Потоки можно объединять:
- поток - поток (объединение окон)
- поток - таблица (обогащение потока)
- таблица - таблица (материализованная поддержка представлений)

При обработке потока данных мы не можем вывести данные только после окончания задачи или перезапустить её в случае неудачи. 
	Одно из решений - разбить поток на небольшие блоки и рассм каждый из них, как микропакет, а также добавить контрольные точки, 
	с которых можно перезапустить выполнение, если все упадет